<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>PiCpo的阁楼</title>
  
  
  <link href="https://picpo.top/atom.xml" rel="self"/>
  
  <link href="https://picpo.top/"/>
  <updated>2025-11-08T17:31:43.203Z</updated>
  <id>https://picpo.top/</id>
  
  <author>
    <name>PiCpo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Steam主页美化指南</title>
    <link href="https://picpo.top/2025/11/09/Steam%E4%B8%BB%E9%A1%B5%E7%BE%8E%E5%8C%96%E6%8C%87%E5%8D%97/"/>
    <id>https://picpo.top/2025/11/09/Steam%E4%B8%BB%E9%A1%B5%E7%BE%8E%E5%8C%96%E6%8C%87%E5%8D%97/</id>
    <published>2025-11-08T16:38:22.000Z</published>
    <updated>2025-11-08T17:31:43.203Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202511090128861.jpg"></p><h2 id="0x00写在前面"><a href="#0x00写在前面" class="headerlink" title="0x00写在前面"></a>0x00写在前面</h2><p>前段时间玩了《魔裁》，B站各种推荐相关的视频，偶然刷到一个相关的Steam个人主页美化视频。于是尝试自己也抄一下作业，其间有些功能是通过前端绕过实现的，开个贴记录一下以免之后想修改却忘记了如何做。</p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?bvid=BV1NsWbzAEHA&high_quality=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;" ></iframe></div> <h2 id="0x01用前须知"><a href="#0x01用前须知" class="headerlink" title="0x01用前须知"></a>0x01用前须知</h2><p>整理了一些美化过程中的小问题</p><h3 id="个人资料背景全透明"><a href="#个人资料背景全透明" class="headerlink" title="个人资料背景全透明"></a>个人资料背景全透明</h3><p>这个只能通过点数商店花费10000点数购买消光2的游戏资料主题</p><p><a href="https://store.steampowered.com/points/shop/app/534380">https://store.steampowered.com/points/shop/app/534380</a></p><h3 id="展柜相关"><a href="#展柜相关" class="headerlink" title="展柜相关"></a>展柜相关</h3><p>等级&gt;10，steam每10级一个展柜位置。也可以点数商城购买。</p><p>升级您的展柜：选定的展柜可进行至多两次升级，您会有更多地方来炫耀徽章，更多空间来展示艺术作品，以及其他特权。</p><p>额外展柜：有时候升级一个展柜是不够的。用 Steam 点数获得额外展柜，获取更多展示空间！</p><p>升级Steam等级的最好方式是先完成社区任务，这个做完了一般能到10级；其次是花费点数（可以通过购买游戏获得，也可以购物平台购入），购入季节性徽章来增长等级（1000点数对应100经验）：最次是通过收集集换式卡牌来合成徽章获取经验，性价比较低（几年前不懂事用余额收集卡片合了几个徽章玩玩）</p><h2 id="0x02创意工坊作品"><a href="#0x02创意工坊作品" class="headerlink" title="0x02创意工坊作品"></a>0x02创意工坊作品</h2><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202511090055737.png"></p><p>原理为将一个gif切为五等份（详细教程请自行检索）。成图依此上传到右侧艺术作品里，上传时需要在终端输入以下JS代码处理（否则无法选择并展示）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$J(<span class="string">&#x27;[name=consumer_app_id]&#x27;</span>).<span class="title function_">val</span>(<span class="number">480</span>);</span><br><span class="line">$J(<span class="string">&#x27;[name=file_type]&#x27;</span>).<span class="title function_">val</span>(<span class="number">0</span>);</span><br><span class="line">$J(<span class="string">&#x27;[name=visibility]&#x27;</span>).<span class="title function_">val</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure><h2 id="0x03精选艺术作品展柜"><a href="#0x03精选艺术作品展柜" class="headerlink" title="0x03精选艺术作品展柜"></a>0x03精选艺术作品展柜</h2><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202511090059156.png"></p><p>如果和前者一样直接上传，在展示时会在下面显示作品名称，很碍眼；但是在上传时不填作品名也无法顺利上传，可以用以下代码在前端绕过（后端并未进行校验）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">v_trim = <span class="function"><span class="params">_</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> _;</span><br><span class="line">&#125;;</span><br><span class="line">$J(<span class="string">&#x27;#title&#x27;</span>).<span class="title function_">val</span>(<span class="string">&#x27; \n&#x27;</span> + <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="title class_">Array</span>(<span class="number">126</span>), <span class="function"><span class="params">_</span> =&gt;</span> <span class="string">&#x27;\t&#x27;</span>).<span class="title function_">join</span>(<span class="string">&#x27;&#x27;</span>));</span><br></pre></td></tr></table></figure><p>另外需要对作品进行剪裁，否则其边框过大，不会很好看：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$J(<span class="string">&#x27;#image_width&#x27;</span>).<span class="title function_">val</span>(<span class="number">1000</span>).<span class="title function_">attr</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">$J(<span class="string">&#x27;#image_height&#x27;</span>).<span class="title function_">val</span>(<span class="number">1</span>).<span class="title function_">attr</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure><p>在b站搜索教程时也找到类似的等价代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num= <span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;image_width&quot;</span>)[<span class="number">0</span>].<span class="property">value</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;image_height&quot;</span>)[<span class="number">0</span>].<span class="property">value</span> = num-(num-<span class="number">1</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&quot;image_width&quot;</span>)[<span class="number">0</span>].<span class="property">value</span>= num*<span class="number">100</span>;</span><br></pre></td></tr></table></figure><h2 id="0x04参考致谢"><a href="#0x04参考致谢" class="headerlink" title="0x04参考致谢"></a>0x04参考致谢</h2><p><a href="https://blog.yuki.sh/posts/daf9288c81ba/#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86">https://blog.yuki.sh/posts/daf9288c81ba/#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86</a></p>]]></content>
    
    
    <summary type="html">0x00写在前面
前段时间玩了《魔裁》，B站各种推荐相关的视频，偶然刷到一个相关的Steam个人主页美化视频。于是尝试自己也抄一下作业，其间有些功能是通过前端绕过实现的，开个贴记录一下以免之后想修改却忘记了如何做。

0x01用前须知
整理了一些美化过程中的小问题

个人资料背景全透明
这个只能通过点数商店花费10000点数购买消光2的游戏资料主题

https://store.steampowered.com/points/shop/app/534380

展柜相关
等级&gt;10，steam每10级一个展柜位置。也可以点数商城购买。

升级您的展柜：选定的展柜可进行至多两次升级，您会有更多地方</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="Steam" scheme="https://picpo.top/tags/Steam/"/>
    
    <category term="前端" scheme="https://picpo.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>《魔法少女的魔女审判》个人测评</title>
    <link href="https://picpo.top/2025/11/05/%E3%80%8A%E9%AD%94%E6%B3%95%E5%B0%91%E5%A5%B3%E7%9A%84%E9%AD%94%E5%A5%B3%E5%AE%A1%E5%88%A4%E3%80%8B%E4%B8%AA%E4%BA%BA%E6%B5%8B%E8%AF%84/"/>
    <id>https://picpo.top/2025/11/05/%E3%80%8A%E9%AD%94%E6%B3%95%E5%B0%91%E5%A5%B3%E7%9A%84%E9%AD%94%E5%A5%B3%E5%AE%A1%E5%88%A4%E3%80%8B%E4%B8%AA%E4%BA%BA%E6%B5%8B%E8%AF%84/</id>
    <published>2025-11-05T08:56:04.000Z</published>
    <updated>2025-11-05T09:13:31.600Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202511051712774.jpeg"></p><p>写了点个人感受，可惜玩的是家庭共享版本没法发表测评，于是就放在这里了。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202511051702202.png"></p><p>类似的文字ADV玩的不多，只玩过逆转裁判三部曲，算是在没有玩过弹丸论破的情况下见识到的一个新机制的游戏了吧。<br>剧情方面的话，我涉猎的“视觉小说”类游戏（也包括之前玩的galgame）也不多。以我浅薄的经历认为其剧情一直算中上等的（即使有一点bug+剧情总体略显仓促）。<br>唯一需要指出的是系统仍需完善，正因为触发日常be时会有个回溯选项，所以我在无数次作死后忘记了保存游戏存档，最后导致某次法庭辩论失败后处刑才发现无法死亡回溯了（[spoiler] 这可太符合设定了 [&#x2F;spoiler]），只能从一周目结尾的存档重新Ctrl过几个已经完成的案子，希望续作能改掉这个小毛病。<br>最后我玩完原作后非常喜欢这个IP，希望制作方后续有官方漫画&#x2F;动画化&#x2F;出版设定集的计划（[spoiler] 我不想只看群友的沙雕表情包了 [&#x2F;spoiler]）。</p>]]></content>
    
    
    <summary type="html">写了点个人感受，可惜玩的是家庭共享版本没法发表测评，于是就放在这里了。



类似的文字ADV玩的不多，只玩过逆转裁判三部曲，算是在没有玩过弹丸论破的情况下见识到的一个新机制的游戏了吧。
剧情方面的话，我涉猎的“视觉小说”类游戏（也包括之前玩的galgame）也不多。以我浅薄的经历认为其剧情一直算中上等的（即使有一点bug+剧情总体略显仓促）。
唯一需要指出的是系统仍需完善，正因为触发日常be时会有个回溯选项，所以我在无数次作死后忘记了保存游戏存档，最后导致某次法庭辩论失败后处刑才发现无法死亡回溯了（[spoiler] 这可太符合设定了 [/spoiler]），只能从一周目结尾的存档重新Ctr</summary>
    
    
    
    <category term="日常" scheme="https://picpo.top/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
    <category term="心得" scheme="https://picpo.top/tags/%E5%BF%83%E5%BE%97/"/>
    
    <category term="游戏" scheme="https://picpo.top/tags/%E6%B8%B8%E6%88%8F/"/>
    
    <category term="ADV" scheme="https://picpo.top/tags/ADV/"/>
    
  </entry>
  
  <entry>
    <title>pixie焊接和验机记录</title>
    <link href="https://picpo.top/2025/07/23/pixie%E7%84%8A%E6%8E%A5%E5%92%8C%E9%AA%8C%E6%9C%BA%E8%AE%B0%E5%BD%95/"/>
    <id>https://picpo.top/2025/07/23/pixie%E7%84%8A%E6%8E%A5%E5%92%8C%E9%AA%8C%E6%9C%BA%E8%AE%B0%E5%BD%95/</id>
    <published>2025-07-23T04:42:53.000Z</published>
    <updated>2025-07-23T05:07:18.326Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202507231248337.jpg"></p><h2 id="0x00写在前面"><a href="#0x00写在前面" class="headerlink" title="0x00写在前面"></a>0x00写在前面</h2><p>今天验机了，很遗憾大失败。主要的问题有两个：一个是未发射就有杂波；第二个是杂散未能小于-30db（测试下大概16左右）。负责人跟我说之前也有一些人来测试自制pixie套件，但是只有一位通过了验机。这位用的是自己的改进方案而非公版，而公版方案虽说几十年了但是在验机方面也不甚理想。但唯一可庆幸（嘴硬）的是，机器至少能运行（</p><p>由于验机失败，所以笔者不建议新手ham通过自制pixie进行短波执照办理。</p><h2 id="0x01制作过程"><a href="#0x01制作过程" class="headerlink" title="0x01制作过程"></a>0x01制作过程</h2><p>套件是在淘宝上买的，价格不贵，20元以内。以下是焊接过程参考（由于传照片麻烦就直接附上我在焊接时的参考了）</p><p><a href="https://www.kechuang.org/s/dt3r06ps">古人新年新作品之HAM篇：PIXIE QRP CW 收发信机制作</a></p>]]></content>
    
    
    <summary type="html">0x00写在前面
今天验机了，很遗憾大失败。主要的问题有两个：一个是未发射就有杂波；第二个是杂散未能小于-30db（测试下大概16左右）。负责人跟我说之前也有一些人来测试自制pixie套件，但是只有一位通过了验机。这位用的是自己的改进方案而非公版，而公版方案虽说几十年了但是在验机方面也不甚理想。但唯一可庆幸（嘴硬）的是，机器至少能运行（

由于验机失败，所以笔者不建议新手ham通过自制pixie进行短波执照办理。

0x01制作过程
套件是在淘宝上买的，价格不贵，20元以内。以下是焊接过程参考（由于传照片麻烦就直接附上我在焊接时的参考了）

古人新年新作品之HAM篇：PIXIE QRP CW </summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="HAM" scheme="https://picpo.top/tags/HAM/"/>
    
    <category term="业余无线电" scheme="https://picpo.top/tags/%E4%B8%9A%E4%BD%99%E6%97%A0%E7%BA%BF%E7%94%B5/"/>
    
  </entry>
  
  <entry>
    <title>qBittorrent迁移</title>
    <link href="https://picpo.top/2025/07/17/qBittorrent%E8%BF%81%E7%A7%BB/"/>
    <id>https://picpo.top/2025/07/17/qBittorrent%E8%BF%81%E7%A7%BB/</id>
    <published>2025-07-17T11:10:59.000Z</published>
    <updated>2025-07-17T11:21:49.251Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202507171913751.png"></p><p>之前玩的几个PT站基本都毕业了，很久没开NAS了。除了某站点以外，其他站点都难通过签到获取一些魔力值。于是打算把之前当电子书战士时的资源迁到不怎么耗电且7x24h开着的服务器上做种去。</p><p>看了一眼一共有2969个做种文件，光搬对应文件还不够，还得把qBit目录下的元数据一起迁移过去。</p><p>qBit的种子数据文件是在<code>~/.local/share/qBittorrent/BT_backup/</code>里，为了不麻烦我直接就把上一级的文件夹直接scp过去了。</p><p>scp前修改了一下<code>/etc/ssh/sshd_config</code>，暂时允许密码登陆。</p>]]></content>
    
    
    <summary type="html">之前玩的几个PT站基本都毕业了，很久没开NAS了。除了某站点以外，其他站点都难通过签到获取一些魔力值。于是打算把之前当电子书战士时的资源迁到不怎么耗电且7x24h开着的服务器上做种去。

看了一眼一共有2969个做种文件，光搬对应文件还不够，还得把qBit目录下的元数据一起迁移过去。

qBit的种子数据文件是在~/.local/share/qBittorrent/BT_backup/里，为了不麻烦我直接就把上一级的文件夹直接scp过去了。

scp前修改了一下/etc/ssh/sshd_config，暂时允许密码登陆。</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="服务器" scheme="https://picpo.top/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="Linux" scheme="https://picpo.top/tags/Linux/"/>
    
    <category term="NAS" scheme="https://picpo.top/tags/NAS/"/>
    
  </entry>
  
  <entry>
    <title>macOS清理右键菜单中的打开方式</title>
    <link href="https://picpo.top/2025/02/10/macOS%E5%88%A0%E9%99%A4%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95%E4%B8%AD%E7%9A%84%E5%A4%9A%E4%BD%99%E6%88%96%E6%98%AF%E6%97%A0%E6%95%88%E7%9A%84%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F/"/>
    <id>https://picpo.top/2025/02/10/macOS%E5%88%A0%E9%99%A4%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95%E4%B8%AD%E7%9A%84%E5%A4%9A%E4%BD%99%E6%88%96%E6%98%AF%E6%97%A0%E6%95%88%E7%9A%84%E6%89%93%E5%BC%80%E6%96%B9%E5%BC%8F/</id>
    <published>2025-02-10T09:39:06.000Z</published>
    <updated>2025-02-10T09:46:26.899Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202502101744051.jpg"></p><p>命令行执行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -kill -r -domain local -domain system-domainuser</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">命令行执行：

1


/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister -kill -r -domain local -domain system-domainuser</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="macOS" scheme="https://picpo.top/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>linux下的crazydiskinfo</title>
    <link href="https://picpo.top/2024/10/27/linux%E4%B8%8B%E7%9A%84crazydiskinfo/"/>
    <id>https://picpo.top/2024/10/27/linux%E4%B8%8B%E7%9A%84crazydiskinfo/</id>
    <published>2024-10-27T09:00:23.000Z</published>
    <updated>2024-10-27T09:06:26.344Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410271701465.jpg"></p><p>CrazyDiskInfo是一款用于Unix类系统的交互式TUI S.M.A.R.T查看器，可以查看硬盘健康情况，是否有坏扇区等。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410271705139.png"></p><p>然而国内的教程太垃圾了，多少年前的还在互相抄，抄来抄去的还只有自己编译这条路。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/otakuto/crazydiskinfo</span><br></pre></td></tr></table></figure><p>本文并不反对你去源码编译，只作为存档记录一下获取安装包的方法。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://ftp.debian.org/debian/pool/main/c/crazydiskinfo/</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410271705493.png"></p>]]></content>
    
    
    <summary type="html">CrazyDiskInfo是一款用于Unix类系统的交互式TUI S.M.A.R.T查看器，可以查看硬盘健康情况，是否有坏扇区等。



然而国内的教程太垃圾了，多少年前的还在互相抄，抄来抄去的还只有自己编译这条路。

1


https://github.com/otakuto/crazydiskinfo


本文并不反对你去源码编译，只作为存档记录一下获取安装包的方法。

1


https://ftp.debian.org/debian/pool/main/c/crazydiskinfo/</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="服务器" scheme="https://picpo.top/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="Linux" scheme="https://picpo.top/tags/Linux/"/>
    
    <category term="运维" scheme="https://picpo.top/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>服务器更新指南</title>
    <link href="https://picpo.top/2024/10/22/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9B%B4%E6%96%B0%E6%8C%87%E5%8D%97/"/>
    <id>https://picpo.top/2024/10/22/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9B%B4%E6%96%B0%E6%8C%87%E5%8D%97/</id>
    <published>2024-10-22T14:59:16.000Z</published>
    <updated>2024-10-27T07:11:01.498Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222307533.png"></p><h2 id="0x00前言"><a href="#0x00前言" class="headerlink" title="0x00前言"></a>0x00前言</h2><p>之前的nas太菜了，MC服务器带不动，功耗也高，正好之前断头+碎显示屏的yoga14c2021已经在家里吃灰一年多了，说实话1135G7就算再菜他也是比4160强，功耗还低，并且多了个电池做内部UPS（</p><h2 id="0x01去头"><a href="#0x01去头" class="headerlink" title="0x01去头"></a>0x01去头</h2><p>屏幕碎了，其原因是转轴寄了（再次奉劝任何想买联想机器的朋友，你即使不怕计划报废买了后也记得延保），必须得把这玩意整下来才方便我后续操作。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222312531.jpeg"></p><p>我是很想把下图的在机身的转轴铰链搞下来的，但问题是他被主板压着，而主板又是被散热器+模块+电池压着，所以总的来说施工风险很高，也很麻烦，我就直接把屏幕从铰链上拆下来了，所以最后还会留着两边两个小铰链，不过无伤大雅。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222345692.jpeg"></p><p>排线也拔了，最后效果还不错，已经是我想要的状态了</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222318762.jpeg"></p><h2 id="0x02系统迁移"><a href="#0x02系统迁移" class="headerlink" title="0x02系统迁移"></a>0x02系统迁移</h2><p>这个本来没啥好说的，主要是被联想bios坑了。我无论是在liveCD里用GParted快速迁移还是dd缓慢迁移，他的BIOS都不认我的盘，查了半天也确实是GPT引导完全没有问题。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222323308.jpeg"></p><p>搞半天试了一下修复分区就好了，我服了。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222324164.jpeg"></p><p>新机器的效能还是很不错的，发一下前后对比：</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222329215.png"></p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222330804.png"></p><h2 id="0x03服务恢复"><a href="#0x03服务恢复" class="headerlink" title="0x03服务恢复"></a>0x03服务恢复</h2><p>记录一下恢复服务时踩的坑吧：</p><p>第一个就是桌面的锅了，一开始测试时进的就是桌面，结果MC服务器测试15分钟时断开链接了，一拍脑袋才发现忘记关了15分钟休眠的选项。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222334301.png"></p><p>第二天早上起来发现service19个failed，问了一下群友这sddm不disable不行。重启之后就没报过错了；而且之前有个核心偶尔会占用100%，内存占用也是一口气吃了8G，我怀疑都是桌面导致的，现在cpu内存占用都很低了。</p><p>第二个坑就是迁移nextcloud和navidrome时发生的了，这两个服务的数据文件都在我的raid1阵列上，但是我现在只有一个硬盘盒，易驱线明天才到。</p><p>我一开始打算在Windows上读取单个盘，但是花了很多时间还失败了（在此之前我尝试连到Mac上，但是无法识别，这也是导致我步入windows上歧途的原因）。随后直接挂载服务器上得了，没想到一下子就读取到了</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410222338850.png"></p><p>后面迁移nextcloud服务时出现了读写问题，原因是文件夹owner是www-data，而我sudo cp下直接导致变成了root，解决方法也简单，加个-p就能保留源文件的权限、所有者和时间戳信息。</p><h2 id="0x04硬件堆放"><a href="#0x04硬件堆放" class="headerlink" title="0x04硬件堆放"></a>0x04硬件堆放</h2><p>硬盘这块，买的是亚克力板子+泡沫海绵垫，用的是易驱线+12V3A圆口电源。</p><p><strong><u>注意！这并不是一个很好的方案，可能会导致硬盘升天数据丢失，请勿模仿。</u></strong></p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410231203826.jpeg"></p><p>另外一开始买的是USB2.0，收货后发现的问题是USB2.0只能驱动2TB以下的硬盘，很神奇。USB2.0很便宜一根几块钱，但是3.0就很贵了得25元。</p><p>装的过程中还遇到了电源大小问题，如图所见这个玩意插上去后会导致相邻的插座无法插任何东西，好在旁边还有个拖线板，可以把电脑的电源插到那块儿去。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410251830644.png"></p><p>好了之后测试了一下，发现速度不敢恭维，只有30-50MB&#x2F;s，不如以前插在SATA线快。但是这也没办法，另外同样有群友也有类似的问题，也是在Linux下限速但是Windows就正常了。不过这些都是小问题，总之我觉得这一套下来功耗和性能都有加强，只是灵车程度也比之前灵车多了，或许过段时间我会整篇新文章来说说翻车后抢救过程（bushi</p><h2 id="0x05-已老实"><a href="#0x05-已老实" class="headerlink" title="0x05 已老实"></a>0x05 已老实</h2><p>昨天的我：先相信</p><p>今天的我：已投降</p><p>先说原因：第一点是易驱线质量很差，4T的盘没问题，8T的盘隔一会儿就会掉盘；其次是Linux下使用外接HDD速度奇慢，我和身边的朋友以及网络上都有同样的案例，同样的外接硬盘在Windows上能跑满速度，但是接在Linux上只有30MB&#x2F;s，跑不到lsusb里5Gbps的USB3.0协议（当然这个问题出现的人很多，也有朋友没有这个问题，这个我就不得而知了）</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410271504160.png"></p><p>现在换成sata了，速度正常了，那么老机器就用来刷pt了。</p>]]></content>
    
    
    <summary type="html">0x00前言
之前的nas太菜了，MC服务器带不动，功耗也高，正好之前断头+碎显示屏的yoga14c2021已经在家里吃灰一年多了，说实话1135G7就算再菜他也是比4160强，功耗还低，并且多了个电池做内部UPS（

0x01去头
屏幕碎了，其原因是转轴寄了（再次奉劝任何想买联想机器的朋友，你即使不怕计划报废买了后也记得延保），必须得把这玩意整下来才方便我后续操作。



我是很想把下图的在机身的转轴铰链搞下来的，但问题是他被主板压着，而主板又是被散热器+模块+电池压着，所以总的来说施工风险很高，也很麻烦，我就直接把屏幕从铰链上拆下来了，所以最后还会留着两边两个小铰链，不过无伤大雅。



</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="服务器" scheme="https://picpo.top/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="Linux" scheme="https://picpo.top/tags/Linux/"/>
    
    <category term="运维" scheme="https://picpo.top/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>ARM64（M1版）架构下macOS运行ALAS脚本</title>
    <link href="https://picpo.top/2024/10/15/ARM64%EF%BC%88M1%E7%89%88%EF%BC%89%E6%9E%B6%E6%9E%84%E4%B8%8BmacOS%E8%BF%90%E8%A1%8CALAS%E8%84%9A%E6%9C%AC/"/>
    <id>https://picpo.top/2024/10/15/ARM64%EF%BC%88M1%E7%89%88%EF%BC%89%E6%9E%B6%E6%9E%84%E4%B8%8BmacOS%E8%BF%90%E8%A1%8CALAS%E8%84%9A%E6%9C%AC/</id>
    <published>2024-10-15T12:00:29.000Z</published>
    <updated>2024-10-15T13:44:26.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410152008286.png"></p><h2 id="0x00前言"><a href="#0x00前言" class="headerlink" title="0x00前言"></a>0x00前言</h2><p>首先感谢Github上面MAA以及AzurLaneAutoScript的开发组，让我们有工具可用。再感谢@吕明珠LmeSzinc 、@binss以及chenhuan20123 大佬，他们的教程让我受益良多。</p><h2 id="0x01模拟器"><a href="#0x01模拟器" class="headerlink" title="0x01模拟器"></a>0x01模拟器</h2><p>安卓官方的模拟器能用，安装吧，我也想运行原生游戏安装包，但是alas似乎只能用adb进行一些操作</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/google/android-emulator-m1-preview/releases/download/0.3/android-emulator-m1-preview.dmg</span><br></pre></td></tr></table></figure><p>这个不用下载android studio，非常好（</p><p>安装后不能直接打开，需要提前进入 <code>Android Emulator.app/Contents/MacOS/api30-gphone-arm64-v8a/config.ini</code>这里面进行一些修改（非常抽象的是，如果你运行后再试图进行修改无论如何也是失效的，只能重新安装），以下是一些需要更改的字段</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">硬盘空间：<span class="attr">disk.dataPartition.size</span>=<span class="number">20480</span>M   //我直接加了个<span class="number">0</span>，因为游戏下载所有资源后也差不多这么大</span><br><span class="line">运行内存：<span class="attr">hw.ramSize</span>=<span class="number">4096</span> //我觉得<span class="number">4</span>G够了</span><br><span class="line">DPI：<span class="attr">hw.lcd.density</span>=<span class="number">420</span> //这个不变</span><br><span class="line">显示高度：<span class="attr">hw.lcd.height</span>=<span class="number">720</span></span><br><span class="line">显示宽度：<span class="attr">hw.lcd.width</span>=<span class="number">1280</span></span><br></pre></td></tr></table></figure><p>运行后可能无法直接将游戏安装包拖动到窗口进行安装，说明你缺少adb，可以使用以下命令在macOS安装这些组件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install android-platform-tools</span><br><span class="line">//安装成功后可以输入以下命令获取位置</span><br><span class="line">adb version</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410152022899.png"></p><p>记得到这个界面给模拟器加上adb路径</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410152024442.png"></p><h2 id="0x02脚本安装"><a href="#0x02脚本安装" class="headerlink" title="0x02脚本安装"></a>0x02脚本安装</h2><p>先去项目原地址把代码全部git clone下来到某个位置，保留用。</p><p>其次去拉取binss大佬做的镜像<code>binss/azurlaneautoscript:arm64</code>（本质是为了mxnet1.9.0这个东西，你愿意的话也可以自己编译），然后你就可以运行一下容器了：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -e TZ=Asia/Shanghai --volume=你自己放alas的文件夹:/app/AzurLaneAutoScript:rw -p 22267:22267 --name azurlaneautoscript binss/azurlaneautoscript:arm64</span><br></pre></td></tr></table></figure><p>第一次运行时可以运行试试，这个镜像是半年前的，所以里面有些东西确实很正常，你可以在docker桌面端的程序里pip，也可以直接docker exec -it。我看了一下大概缺少了<code>onepush==1.3.0</code>、<code>pydantic==1.10.2</code>、<code>uiautomator2cache==0.3.0.1</code>等这几个。版本号不要照抄，对着requrements.txt文件查；也别一上来就直接安装整个requrements.txt，这会把<a href="https://binsitepublic-10018028.file.myqcloud.com/mxnet-1.9.1-py3-none-any.whl">mxnet-1.9.1</a>顶掉为1.6.0，相当于镜像白装了。</p><h2 id="0x03使用"><a href="#0x03使用" class="headerlink" title="0x03使用"></a>0x03使用</h2><p>经过几次重启容器，这次大概率可以正常使用了：serial设置为<code>host.docker.internal:5555</code>，截图方案和点击方案我都是ADB。打开webUI后可以测试一下，看看有没有问题。</p><p>有人推荐点击方案是Hermit，但我这偶尔出问题后会自动转为另一个根本不可用的方案，我无语了，目前切换为ADB一点问题都没，后面出了状况再说吧。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202410152051428.png"></p>]]></content>
    
    
    <summary type="html">0x00前言
首先感谢Github上面MAA以及AzurLaneAutoScript的开发组，让我们有工具可用。再感谢@吕明珠LmeSzinc 、@binss以及chenhuan20123 大佬，他们的教程让我受益良多。

0x01模拟器
安卓官方的模拟器能用，安装吧，我也想运行原生游戏安装包，但是alas似乎只能用adb进行一些操作

1


https://github.com/google/android-emulator-m1-preview/releases/download/0.3/android-emulator-m1-preview.dmg


这个不用下载android st</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="macOS" scheme="https://picpo.top/tags/macOS/"/>
    
    <category term="碧蓝航线" scheme="https://picpo.top/tags/%E7%A2%A7%E8%93%9D%E8%88%AA%E7%BA%BF/"/>
    
  </entry>
  
  <entry>
    <title>Linux全盘备份指南</title>
    <link href="https://picpo.top/2024/07/30/Linux%E5%85%A8%E7%9B%98%E5%A4%87%E4%BB%BD%E6%8C%87%E5%8D%97/"/>
    <id>https://picpo.top/2024/07/30/Linux%E5%85%A8%E7%9B%98%E5%A4%87%E4%BB%BD%E6%8C%87%E5%8D%97/</id>
    <published>2024-07-30T04:53:28.000Z</published>
    <updated>2024-09-16T18:31:31.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202407301307619.png"></p><p>难绷之灵车服务器的系统盘炸了，损失极其惨重，这几天重新装了个Debian系统，想着有必要搞一个全盘备份系统的功能（数据备份真的很重要QAQ）。</p><p>目前用的是dd+alist+rclone，原理就是dd全盘备份+压缩+alist挂载各种云盘+rclone上传到alist的webdav上：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份并压缩脚本</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查是否具有root权限</span></span><br><span class="line">if [ &quot;$EUID&quot; -ne 0 ]; then</span><br><span class="line">  echo &quot;请使用root权限运行此脚本&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查是否传入了源磁盘和目标目录</span></span><br><span class="line">if [ $# -ne 2 ]; then</span><br><span class="line">  echo &quot;使用方法: $0 &lt;源磁盘&gt; &lt;目标目录&gt;&quot;</span><br><span class="line">  echo &quot;例如: $0 /dev/sda /path/to/backup_directory&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">SOURCE_DISK=$1</span><br><span class="line">TARGET_DIR=$2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">确认源磁盘存在</span></span><br><span class="line">if [ ! -b &quot;$SOURCE_DISK&quot; ]; then</span><br><span class="line">  echo &quot;源磁盘不存在: $SOURCE_DISK&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">确认目标目录存在</span></span><br><span class="line">if [ ! -d &quot;$TARGET_DIR&quot; ]; then</span><br><span class="line">  echo &quot;目标目录不存在: $TARGET_DIR&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生成目标文件名，使用下划线分割年月日时间</span></span><br><span class="line">TIMESTAMP=$(date +&quot;%Y_%m_%d_%H_%M_%S&quot;)</span><br><span class="line">TARGET_FILE=&quot;$TARGET_DIR/backup_$TIMESTAMP.img.gz&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份磁盘并压缩到目标文件</span></span><br><span class="line">echo &quot;开始备份并压缩 $SOURCE_DISK 到 $TARGET_FILE ...&quot;</span><br><span class="line">dd if=$SOURCE_DISK bs=4M status=progress | gzip &gt; $TARGET_FILE</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查备份是否成功</span></span><br><span class="line">if [ $? -eq 0 ]; then</span><br><span class="line">  echo &quot;备份并压缩成功: $TARGET_FILE&quot;</span><br><span class="line">  </span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">使用rclone将备份文件移动到远程存储</span></span><br><span class="line">  echo &quot;开始将备份文件移动到远程存储...&quot;</span><br><span class="line">  rclone move $TARGET_FILE backup:/backup -P --no-check-certificate</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">  # </span><span class="language-bash">检查rclone是否成功</span></span><br><span class="line">  if [ $? -eq 0 ]; then</span><br><span class="line">    echo &quot;备份文件移动成功&quot;</span><br><span class="line">  else</span><br><span class="line">    echo &quot;备份文件移动失败&quot;</span><br><span class="line">    exit 1</span><br><span class="line">  fi</span><br><span class="line">else</span><br><span class="line">  echo &quot;备份并压缩失败&quot;</span><br><span class="line">  exit 1</span><br><span class="line">fi</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>保存这个脚本到一个文件中，比如<code>backup_and_compress_with_timestamp.sh</code>，然后给它可执行权限：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x backup_and_compress_with_timestamp.sh</span><br><span class="line">sudo ./backup_and_compress_with_timestamp.sh /dev/sda /path/to/backup_directory</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202407301332892.png"></p>]]></content>
    
    
    <summary type="html">难绷之灵车服务器的系统盘炸了，损失极其惨重，这几天重新装了个Debian系统，想着有必要搞一个全盘备份系统的功能（数据备份真的很重要QAQ）。

目前用的是dd+alist+rclone，原理就是dd全盘备份+压缩+alist挂载各种云盘+rclone上传到alist的webdav上：

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="linux" scheme="https://picpo.top/tags/linux/"/>
    
    <category term="Debian" scheme="https://picpo.top/tags/Debian/"/>
    
  </entry>
  
  <entry>
    <title>AFP与Time Machine</title>
    <link href="https://picpo.top/2023/05/01/AFP%E4%B8%8ETime%20Machine/"/>
    <id>https://picpo.top/2023/05/01/AFP%E4%B8%8ETime%20Machine/</id>
    <published>2023-05-01T12:25:18.000Z</published>
    <updated>2024-09-16T18:32:04.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/20230501204251.png"></p><h2 id="0x01安装"><a href="#0x01安装" class="headerlink" title="0x01安装"></a>0x01安装</h2><p>安装Netatalk服务，用来把Linux&#x2F;Unix伪装成AFP协议传输的文件服务器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install netatalk</span><br></pre></td></tr></table></figure><p>安装avahi-daemon，用来在Linux&#x2F;Unix中开启类似的Bonjour的服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install avahi-daemon</span><br></pre></td></tr></table></figure><h2 id="0x02配置文件"><a href="#0x02配置文件" class="headerlink" title="0x02配置文件"></a>0x02配置文件</h2><p>编辑<code>/etc/netatalk/afp.conf</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">;</span><br><span class="line">; Netatalk 3.x configuration file</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">[Global]</span><br><span class="line">; Global server settings</span><br><span class="line"></span><br><span class="line">; [Homes]</span><br><span class="line">; basedir regex = /xxxx</span><br><span class="line"></span><br><span class="line">; [My AFP Volume]</span><br><span class="line">; path = /path/to/volume</span><br><span class="line"></span><br><span class="line">; [My Time Machine Volume]</span><br><span class="line">; path = /path/to/backup</span><br><span class="line">; time machine = yes</span><br><span class="line"></span><br><span class="line">[PiCpo Time Machine]</span><br><span class="line">path = /mnt/HGST01/Time ;这是我挂载的文件目录</span><br><span class="line">time machine = yes</span><br><span class="line">valid users = user ;选择登陆的用户</span><br></pre></td></tr></table></figure><p>最后别忘了restart</p><p>选择添加afp:&#x2F;&#x2F;ip再输入用户名密码就能连接到自己的Time Machine服务器了</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/3145f8286ec543689a6b0a8614a2843e.jpeg"></p>]]></content>
    
    
    <summary type="html">0x01安装
安装Netatalk服务，用来把Linux/Unix伪装成AFP协议传输的文件服务器：

1


sudo apt-get install netatalk


安装avahi-daemon，用来在Linux/Unix中开启类似的Bonjour的服务：

1


sudo apt-get install avahi-daemon


0x02配置文件
编辑/etc/netatalk/afp.conf

1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21


;
; Netatalk 3.x configuration fil</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="linux" scheme="https://picpo.top/tags/linux/"/>
    
    <category term="AFP" scheme="https://picpo.top/tags/AFP/"/>
    
    <category term="ubuntu" scheme="https://picpo.top/tags/ubuntu/"/>
    
    <category term="Time Machine" scheme="https://picpo.top/tags/Time-Machine/"/>
    
  </entry>
  
  <entry>
    <title>家用服务器折腾指南</title>
    <link href="https://picpo.top/2023/01/15/%E5%AE%B6%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8A%98%E8%85%BE%E6%8C%87%E5%8D%97/"/>
    <id>https://picpo.top/2023/01/15/%E5%AE%B6%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8A%98%E8%85%BE%E6%8C%87%E5%8D%97/</id>
    <published>2023-01-15T10:14:03.000Z</published>
    <updated>2024-09-16T18:32:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202301151847944.jpg"></p><h2 id="0x00写在前面"><a href="#0x00写在前面" class="headerlink" title="0x00写在前面"></a>0x00写在前面</h2><p>去年暑假组了一台新电脑，老电脑逐渐用不上用场了。恰好我有刷pt的需求，还想运行MC等游戏的服务器，于是我就动手改造这台老电脑了。</p><h2 id="0x01硬件配置"><a href="#0x01硬件配置" class="headerlink" title="0x01硬件配置"></a>0x01硬件配置</h2><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202301151851767.png"></p><p>这台老电脑是15年配的：CPU是i3-4160，两个核心四个线程；主板是技嘉的丐版H81M-D2，有两个内存插槽，最大只支持8G的DDR3内存；主板有三个PCIE接口，一个PCIEx16够宽，两个PCIEx1比较短；还有四个SATA接口；另外主板太老没有HDMI只有VGA接口，除此之外的千兆以太网口没啥好说的</p><p>PCIEx16上的亮机卡是GT640 2G，其实就是装系统时候用的；PCIEx1装了个物联网开机模块，因为我要将其放到家中，而我常年在外面上学，所以这个必不可少；还有个PCIEx1是英特尔Intel Corporation Wireless 7260网卡，这个是当时在学校里倒腾这玩意时应急选项，因为当初交换机太远，显示器太近。</p><p>内存的话，只插了一根8G的DDR3内存，没想插更多是因为没有那么多服务要跑。当然了，高版本的MC多少内存都不够，不够我的U似乎也有些捉襟见肘了。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202301151912133.png"></p><p>SATA四个接口全被占用啦。一个是系统盘，威刚的远古120G固态盘；一个两百块淘来的4THGST企业盘，是真的吵，也是真的烫，为此我加了个风扇改变风道，用来刷刷PT还是比较够的；之前云盘服务是在日立盘上的，但这小文件读写实在是太吵了，也不安全，于是26块包邮搞了块500G西数蓝盘，配上闲置的500G西数绿盘，组了个RAID1阵列，图个心安吧，这个阵列就是专门做云盘备份了。</p><h2 id="0x02系统与网络配置"><a href="#0x02系统与网络配置" class="headerlink" title="0x02系统与网络配置"></a>0x02系统与网络配置</h2><p>系统没啥好说的，本人不喜欢折腾，也就没有搞ESXi，我系统盘实在是太小了，我为了配置方便就直接装Ubuntu 22.04.1 LTS了。</p><p>网络的话，我家里是楼上楼下；光猫先是进入一楼的房间，通过院子里的飞线飞到二楼客厅弱电箱的交换机里。一路上的路由器我全改为了mesh组网，这是为了保证每个设备都能拿到ipv6。另外，据修网的师傅所言，上海电信的SDN只有在有公网的情况下才能正常使用ipv6（我不理解），于是我也拿到了我的一个公网v4地址，管他静态还是动态（半个多月都没改变地址），能有就是赢麻了！v4的话不支持NAT回流，就是我内网的主机没法用公网IP访问我的设备；但是v6没有公网内网之分，没有问题；还有就是v4v6都被封了80，443，8080端口。</p><h2 id="0x03游戏服务器"><a href="#0x03游戏服务器" class="headerlink" title="0x03游戏服务器"></a>0x03游戏服务器</h2><p>这个配置拿来刷pt和做NAS（不考虑转码）其实是有些暴殄天物了，刚好我的云服务器也到期了，于是就把我的游戏服务器全都迁移到家里。</p><h3 id="1-MC运维面板MCSManager"><a href="#1-MC运维面板MCSManager" class="headerlink" title="1.MC运维面板MCSManager"></a>1.MC运维面板MCSManager</h3><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202301151920251.png"></p><p>Aimed to provide a healthy software support for server administrators of Minecraft, Terraria and other game servers.</p><p>官网地址：<a href="https://mcsmanager.com/">https://mcsmanager.com/</a></p><p>这个东西简直不要太好用！我之前在云服务器上搭建的我的世界服务器，经常要不停地按UP键找历史命令，有一次还输入错误导致存档没了，非常可惜；如果想做备份和其他计划任务，说不难也不难，shell和crontab看着文档就能写出想要的东西了。但这些繁琐危险的操作本可以避免，在MCSManager里，你可以很方便地在网页端执行命令、修改配置文件、上传整合包、设定计划任务，甚至可以说，他就是一个网页Linux周期命令执行器。另外本身自带一些api，在我的NekobotQQ机器人还活着时，无需打开游戏戳一戳她就显示服务器情况和人数。</p><p>安装很简单，官网提供了wget下载的安装脚本和docker安装方式，我是推荐用wget：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://raw.githubusercontent.com/mcsmanager/Script/master/setup_en.sh | bash</span><br></pre></td></tr></table></figure><h3 id="2-SteamCMD"><a href="#2-SteamCMD" class="headerlink" title="2.SteamCMD"></a>2.SteamCMD</h3><p>SteamCMD is the command line version of the Steam client. The tool is used <strong>to download dedicated server applications of popular Steam games quickly  and easily for running your own Valheim server or Rust server</strong>, for example.</p><p>官方网址：<a href="https://developer.valvesoftware.com/wiki/SteamCMD">https://developer.valvesoftware.com/wiki/SteamCMD</a></p><p>也挺好安装的，具体方法包括在我之前写的<a href="https://picpo.top/2022/01/18/%E5%9C%A8linux%E5%B9%B3%E5%8F%B0%E4%B8%8A%E6%90%AD%E5%BB%BA%E6%B1%82%E7%94%9F%E4%B9%8B%E8%B7%AF%E6%9C%8D%E5%8A%A1%E5%99%A8/">在linux平台上搭建求生之路服务器</a>里。要注意的是，SteamCMD似乎是能被MCSManager原生识别的，但是其权限问题错综复杂无法访问到一些文件，本人水平不够没有细究（懒），所以就ssh后screen运维拉到。</p><p>服务器上跑了求生之路和饥荒的服务器，很可惜这两个游戏都原生不支持ipv6，但还好我本身就有公网v4😋。</p><h2 id="0x04运维组件"><a href="#0x04运维组件" class="headerlink" title="0x04运维组件"></a>0x04运维组件</h2><p>SSH和Linux谁都会，但这些繁琐的操作都是可以避免的。</p><h3 id="1-DDNS-GO"><a href="#1-DDNS-GO" class="headerlink" title="1.DDNS-GO"></a>1.DDNS-GO</h3><p>官方网址：<a href="https://github.com/jeessy2/ddns-go">https://github.com/jeessy2/ddns-go</a></p><p>这是一个用go写的ddns，且不说我的v4很有可能是动态的，ipv6可是每两天就变化一次的，所以有个ddns服务非常有必要。</p><p>我的安装方式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name ddns-go --restart=always --net=host -v /opt/ddns-go:/root jeessy/ddns-go</span><br></pre></td></tr></table></figure><h3 id="2-性能监控-运维Cockpit"><a href="#2-性能监控-运维Cockpit" class="headerlink" title="2.性能监控&amp;运维Cockpit"></a>2.性能监控&amp;运维Cockpit</h3><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202301151939945.webp"></p><p>这个是Fedora Server自带的面板，作为debian系的Ubuntu肯定也能装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install cockpit -y</span><br></pre></td></tr></table></figure><p>多的不说，光Storage能帮你格式化、分区、组软RAID就已经很好了。界面很素，但是很好用。</p><p>安全性有自签名证书，不放心可以搞个其他的。</p><h3 id="3-Portainer"><a href="#3-Portainer" class="headerlink" title="3.Portainer"></a>3.Portainer</h3><p>Deploy, configure, troubleshoot and secure containers in minutes  on Kubernetes, Docker, Swarm and Nomad in any data center, cloud,  network edge or IIOT device. </p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202301151945605.webp"></p><p>官方网址：<a href="https://www.portainer.io/">https://www.portainer.io/</a></p><p>这个没啥好说，管理docker容器的。我有太多服务是依赖docker快速启动的了。</p><p>我的安装方式：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull portainer/portainer:latest</span><br><span class="line"></span><br><span class="line">docker run -d --net=host --restart=unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v /data/portainer_data:/data portainer/portainer:1.23.2</span><br></pre></td></tr></table></figure><h2 id="0x05其他服务"><a href="#0x05其他服务" class="headerlink" title="0x05其他服务"></a>0x05其他服务</h2><h3 id="1-transmission-daemon"><a href="#1-transmission-daemon" class="headerlink" title="1.transmission-daemon"></a>1.transmission-daemon</h3><p>磁力下载工具，主要用来刷pt。</p><p>我的安装方式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install transmission-daemon</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>原版界面太素，信息不够详尽，推荐用这个改善：</p><p><a href="https://github.com/ronggang/transmission-web-control">https://github.com/ronggang/transmission-web-control</a></p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202301151954452.png"></p><h3 id="2-LibreSpeed"><a href="#2-LibreSpeed" class="headerlink" title="2.LibreSpeed"></a>2.LibreSpeed</h3><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202302041435726.png"></p><p>测速服务器。官方网址：<a href="https://github.com/librespeed/speedtest-go">https://github.com/librespeed/speedtest-go</a></p><p>我的安装方式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker pull badapple9/speedtest-x</span><br><span class="line"></span><br><span class="line">docker run -d --restart=always --name speedtest -p 9001:80 -it badapple9/speedtest-x</span><br></pre></td></tr></table></figure><h3 id="3-Samba服务"><a href="#3-Samba服务" class="headerlink" title="3.Samba服务"></a>3.Samba服务</h3><p>单纯当Nas用的服务</p><p>我的安装方式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install samba samba-common</span><br></pre></td></tr></table></figure><p>配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/samba/smb.conf</span><br><span class="line"></span><br><span class="line">//更多配置字段请查阅Google</span><br><span class="line"></span><br><span class="line">[share]</span><br><span class="line">comment = share folder</span><br><span class="line">browseable = <span class="built_in">yes</span></span><br><span class="line">path = /home/frank/share</span><br><span class="line">create mask = 0700</span><br><span class="line">directory mask = 0700=</span><br><span class="line">public = <span class="built_in">yes</span></span><br><span class="line">available = <span class="built_in">yes</span></span><br><span class="line">writable = <span class="built_in">yes</span></span><br></pre></td></tr></table></figure><p>重启服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service smbd restart</span><br></pre></td></tr></table></figure><p>推荐给samba新创建一个用户，而不是root和本机用户。</p><h3 id="4-Nextcloud网盘"><a href="#4-Nextcloud网盘" class="headerlink" title="4.Nextcloud网盘"></a>4.Nextcloud网盘</h3><p>The most popular self-hosted collaboration solution for tens of millions of users at thousands of organizations across the globe</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202301152005332.webp"></p><p>官方网址：<a href="https://nextcloud.com/">https://nextcloud.com/</a></p><p>我的安装方式是docker而不是官网推荐的docker-compose，因为docker-compose出现了权限读取问题，没解决成功。推荐自己去官网看docker-compose.yml。</p><p>挺好用的，每个平台都有客户端，主要用来同步手机照片和其他文件，当网盘用。</p><h3 id="5-Navidrome私有音乐服务"><a href="#5-Navidrome私有音乐服务" class="headerlink" title="5.Navidrome私有音乐服务"></a>5.Navidrome私有音乐服务</h3><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202302041438738.png"></p><p>受不了各大音乐平台的版权壁垒了，官方网址：<a href="https://www.navidrome.org/">https://www.navidrome.org/</a></p><ul><li>几乎可以播放任何音频格式</li><li>多用户，每个用户都有自己的播放次数、播放列表、收藏夹等。</li><li>资源使用率非常低。例如：300GB的资料库（约29000首歌曲），使用不到50MB的内存。</li><li>界面简洁，支持中文。</li><li>支持Subsonic API，也就是说Subsonic能用的客户端，Navidrome都能用。</li></ul><p>唯一的问题就是歌词显示有问题，似乎放到目录里也显示无歌词。</p><p>我的docker-compose.yml：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">navidrome:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">navidrome</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">deluan/navidrome:latest</span></span><br><span class="line">    <span class="attr">user:</span> <span class="number">0</span><span class="string">:0</span> <span class="comment">#0:0代表用root用户运行</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;4533:4533&quot;</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="comment"># Optional: put your config options customization here. Examples:</span></span><br><span class="line">      <span class="attr">ND_SCANSCHEDULE:</span> <span class="string">1h</span></span><br><span class="line">      <span class="attr">ND_LOGLEVEL:</span> <span class="string">info</span>  </span><br><span class="line">      <span class="attr">ND_SESSIONTIMEOUT:</span> <span class="string">24h</span></span><br><span class="line">      <span class="attr">ND_BASEURL:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="attr">ND_ENABLETRANSCODINGCONFIG:</span> <span class="string">&quot;true&quot;</span></span><br><span class="line">      <span class="attr">ND_TRANSCODINGCACHESIZE:</span> <span class="string">&quot;4000M&quot;</span></span><br><span class="line">      <span class="attr">ND_IMAGECACHESIZE:</span> <span class="string">&quot;1000M&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/mnt/WDC/navidrome/data:/data&quot;</span> <span class="string">//数据文件</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;/mnt/WDC/navidrome/media:/music:ro&quot;</span> <span class="string">//媒体文件</span></span><br></pre></td></tr></table></figure><p>以下是支持的客户端：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">iOS: play:Sub, substreamer, Amperfy, iSub</span><br><span class="line">Android: DSub, Subtracks, subreamer, Ultrasonic, Audinaut</span><br><span class="line">网页端: Subplayer, Airsonic Refix, Aurial, Jamstash, Subfire</span><br><span class="line">桌面端: Sublime Music（Linux）和Sonixd（Windows/Linux/MacOS）</span><br><span class="line">命令行: Jellycli（Windows/Linux）和STMP（Linux/MacOS）</span><br></pre></td></tr></table></figure><h3 id="6-CUPS网络打印机"><a href="#6-CUPS网络打印机" class="headerlink" title="6.CUPS网络打印机"></a>6.CUPS网络打印机</h3><p>安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cups</span><br></pre></td></tr></table></figure><p>备份文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/cups/cupsd.conf /etc/cups/cupsd.conf.bak</span><br></pre></td></tr></table></figure><p>我的配置文档，仅供参考：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">LogLevel warn</span><br><span class="line">PageLogFormat</span><br><span class="line">MaxLogSize 0</span><br><span class="line">ErrorPolicy retry-job</span><br><span class="line">//listen需要将localhost改为0.0.0.0，记得防火墙弄好</span><br><span class="line"># Allow remote access</span><br><span class="line">Port 631</span><br><span class="line">Listen /run/cups/cups.sock</span><br><span class="line"># Share local printers on the local network.</span><br><span class="line">Browsing On</span><br><span class="line">BrowseLocalProtocols dnssd</span><br><span class="line">DefaultAuthType Basic</span><br><span class="line">WebInterface Yes</span><br><span class="line">IdleExitTimeout 60</span><br><span class="line"></span><br><span class="line">//这块地方需要修改成这样，否则forbidden</span><br><span class="line">&lt;Location /&gt;</span><br><span class="line">  # Allow shared printing...</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow all</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line">&lt;Location /admin&gt;</span><br><span class="line">  AuthType Default</span><br><span class="line">  Require valid-user</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;Location /admin/conf&gt;</span><br><span class="line">  AuthType Default</span><br><span class="line">  Require user @SYSTEM</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line">&lt;Location /admin/log&gt;</span><br><span class="line">  AuthType Default</span><br><span class="line">  Require user @SYSTEM</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line">&lt;Policy default&gt;</span><br><span class="line">  JobPrivateAccess default</span><br><span class="line">  JobPrivateValues default</span><br><span class="line">  SubscriptionPrivateAccess default</span><br><span class="line">  SubscriptionPrivateValues default</span><br><span class="line">  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default CUPS-Get-Devices&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit All&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">&lt;/Policy&gt;</span><br><span class="line">&lt;Policy authenticated&gt;</span><br><span class="line">  JobPrivateAccess default</span><br><span class="line">  JobPrivateValues default</span><br><span class="line">  SubscriptionPrivateAccess default</span><br><span class="line">  SubscriptionPrivateValues default</span><br><span class="line">  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit All&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">&lt;/Policy&gt;</span><br><span class="line">&lt;Policy kerberos&gt;</span><br><span class="line">  JobPrivateAccess default</span><br><span class="line">  JobPrivateValues default</span><br><span class="line">  SubscriptionPrivateAccess default</span><br><span class="line">  SubscriptionPrivateValues default</span><br><span class="line">  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;</span><br><span class="line">    AuthType Negotiate</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class="line">    AuthType Negotiate</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;</span><br><span class="line">    AuthType Negotiate</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit All&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">&lt;/Policy&gt;</span><br></pre></td></tr></table></figure><p>重启：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service cups restart</span><br></pre></td></tr></table></figure><p>然后输入内网IP:631进入管理页面并登陆</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202302041448968.png"></p><p>选择usb的打印机即可，其他选项看自己，驱动需要选择对应的，别忘了开启share选项（包括截图页面的）</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202302041450041.png"></p><p>测试一下，打印成功</p>]]></content>
    
    
    <summary type="html">0x00写在前面
去年暑假组了一台新电脑，老电脑逐渐用不上用场了。恰好我有刷pt的需求，还想运行MC等游戏的服务器，于是我就动手改造这台老电脑了。

0x01硬件配置


这台老电脑是15年配的：CPU是i3-4160，两个核心四个线程；主板是技嘉的丐版H81M-D2，有两个内存插槽，最大只支持8G的DDR3内存；主板有三个PCIE接口，一个PCIEx16够宽，两个PCIEx1比较短；还有四个SATA接口；另外主板太老没有HDMI只有VGA接口，除此之外的千兆以太网口没啥好说的

PCIEx16上的亮机卡是GT640 2G，其实就是装系统时候用的；PCIEx1装了个物联网开机模块，因为我要将其</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="linux" scheme="https://picpo.top/tags/linux/"/>
    
    <category term="ubuntu" scheme="https://picpo.top/tags/ubuntu/"/>
    
    <category term="Docker" scheme="https://picpo.top/tags/Docker/"/>
    
    <category term="NAS" scheme="https://picpo.top/tags/NAS/"/>
    
  </entry>
  
  <entry>
    <title>shell备份脚本</title>
    <link href="https://picpo.top/2023/01/13/shell%E5%A4%87%E4%BB%BD%E8%84%9A%E6%9C%AC/"/>
    <id>https://picpo.top/2023/01/13/shell%E5%A4%87%E4%BB%BD%E8%84%9A%E6%9C%AC/</id>
    <published>2023-01-13T15:30:53.000Z</published>
    <updated>2024-09-16T18:32:25.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202301132338163.png"></p><p>写了个shell的备份脚本，自带删除过早存档的功能。</p><p>本意是为饥荒服务器写的，虽然饥荒自带回档，但是人物数据、token以及mod配置没被备份。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /bin/bash</span></span><br><span class="line">today=`date +%Y%m%d%H%M`</span><br><span class="line">tar -czvf /mnt/WDC/dst_backup/$today.tar.gz /home/picpo/.klei/DoNotStarveTogether/Cluster_1</span><br><span class="line">find /mnt/WDC/dst_backup/ -type f -mtime +1 -exec rm -f &#123;&#125; \; #自动删除+1是两天之前的存档</span><br><span class="line">echo &quot;backup!$today&quot;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">写了个shell的备份脚本，自带删除过早存档的功能。

本意是为饥荒服务器写的，虽然饥荒自带回档，但是人物数据、token以及mod配置没被备份。

1
2
3
4
5


#! /bin/bash
today=`date +%Y%m%d%H%M`
tar -czvf /mnt/WDC/dst_backup/$today.tar.gz /home/picpo/.klei/DoNotStarveTogether/Cluster_1
find /mnt/WDC/dst_backup/ -type f -mtime +1 -exec rm -f {} &#92;; #自动删除+1是两天之前的存档
echo </summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="linux" scheme="https://picpo.top/tags/linux/"/>
    
    <category term="shell" scheme="https://picpo.top/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>《汇编语言程序设计》求生指南</title>
    <link href="https://picpo.top/2022/11/14/%E3%80%8A%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E3%80%8B%E6%B1%82%E7%94%9F%E6%8C%87%E5%8D%97/"/>
    <id>https://picpo.top/2022/11/14/%E3%80%8A%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E3%80%8B%E6%B1%82%E7%94%9F%E6%8C%87%E5%8D%97/</id>
    <published>2022-11-14T07:26:05.000Z</published>
    <updated>2022-12-28T12:05:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/%E5%9B%BE%E7%89%87-300x181.png"></p><h2 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h2><ol><li>BCD码转换<br>1010—1111是非法BCD码</li><li>真值数和补码数之间的转换<br>正数的补码等于本身，负数的补码等于反码+1</li><li>n位字长的有符号数、无符号数的数值范围<br>设机器数字长&#x3D;n, 则n位补码数<br>其真值范围为 －2n-1 ～ +2n-1－1<br>无符号数其数值范围为 0 ～ 2n－1</li><li>常用ASCII码范围：<br>0:48<br>A:65<br>a:97<br>(space):32<br>(回车):13</li><li>C标表示进位，O标表示溢出</li><li>冯诺依曼架构：<strong>运算器、控制器、存储器、输入、输出</strong><br>CPU：运算器和控制器</li></ol><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/image.png"></p><h2 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h2><ol><li>基本结构寄存器的名称、位长和作用<br>通用寄存器: AX, BX, CX, DX, SI（源变址）, DI（目的变址）, BP（基址指针）<br>段寄存器: CS, SS, DS, ES, FS, GS<br>指针寄存器: IP（指令指针）, SP（堆栈指针）<br>标志寄存器: FLAGS<br>15位标志分为两类: 状态标志和控制标志<br>6种状态标志：CF（进位） OF（溢出） ZF（全零） PF（最后一字节1为偶数为1） AF（辅助进位标志） SF（记录最高位的位值）</li><li>80486的工作模式：实地址模式和保护虚拟地址模式<br>80486的三个存贮地址空间：逻辑空间、线性空间和物理空间<br>逻辑地址：即逻辑上的地址，实模式下由“段基地址+段内偏移”组成;保护模式下由“段选择符+段内偏移”组成。<br>线性地址：逻辑地址经分段机制后就成线性地址，它是平坦的;如果不启用分页，那么此线性地址即物理地址。<br>物理地址：线性地址经分页转换后就成了物理地址。<br><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/image-1.png"></li><li>实地址模式下，物理地址的形成<br><strong>物理地址&#x3D;段基址*16+偏移地址</strong><br><strong>内存容量&#x3D;末地址-首地址+1</strong><br><strong>末地址&#x3D;首地址+（字数-1）*2 末地址</strong></li></ol><h2 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h2><ol><li><p>源程序中的语句类型<br>一个完整的源程序应包含2类语句:<br>指令性语句（符号指令）、指示性语句(伪指令)</p></li><li><p>80486的寻址方式486有3类7种寻址方式<br>立即寻址方式：获得立即数<br>寄存器寻址方式：获得寄存器操作数<br>存储器操作数寻址方式：获得存储器操作数（内存操作数）</p></li><li><p>内存寻址方式 16位寻址规定可使用的寄存器<br>直接寻址<br>寄存器间接寻址 [BX],[BP],[SI],[DI]。段寄存器：[间址寄存器]，某单元的物理地址&#x3D;段寄存器内容×16+间址寄存器<br>基址寻址 [BX+位移量],[BP＋位移量]。段寄存器:[基址寄存器+位移量]。物理地址&#x3D;段寄存器内容×16+基址寄存器+位移量<br>变址寻址 [SI+位移量],[DI+位移量]。<br>基址+变址寻址 [BX+SI],[BX+DI],[BP+SI]，[BP+DI]</p></li><li><p>常用伪指令<br>数据字义伪指令 DB DW DD（一字节二字节四字节）<br>等值伪指令 EQU &#x3D;</p></li><li><p>常用运算符<br>$运算符：当前汇编计数器的值。通常$-地址，可以求长度<br>SEG运算符：获取段的基地址，SEG DATA<br>OFFSET运算符：相对于段首的基地址<br>PTR运算符：修改属性<br><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/image-2.png"></p></li><li><p>目标程序的生成<br><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/1668425716_POWERPNT_1065x313.png"></p></li><li><p>16进制数加法及标志位的影响<br><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/1668425885_POWERPNT_1101x202.png">80486基本指令集<br><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/1668426216_POWERPNT_1132x505.png">  </p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/1668426445_POWERPNT_1002x554.png">  </p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/1668426487_POWERPNT_1014x818.png"></p></li></ol><h2 id="第四章"><a href="#第四章" class="headerlink" title="第四章"></a>第四章</h2><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/image-3-1024x461.png"></p>]]></content>
    
    
    <summary type="html">第一章
 1. BCD码转换
    1010—1111是非法BCD码
 2. 真值数和补码数之间的转换
    正数的补码等于本身，负数的补码等于反码+1
 3. n位字长的有符号数、无符号数的数值范围
    设机器数字长=n, 则n位补码数
    其真值范围为 －2n-1 ～ +2n-1－1
    无符号数其数值范围为 0 ～ 2n－1
 4. 常用ASCII码范围：
    0:48
    A:65
    a:97
    (space):32
    (回车):13
 5. C标表示进位，O标表示溢出
 6. 冯诺依曼架构：运算器、控制器、存储器、输入、输出
    CPU：</summary>
    
    
    
    <category term="我爱学习" scheme="https://picpo.top/categories/%E6%88%91%E7%88%B1%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="求生指南" scheme="https://picpo.top/tags/%E6%B1%82%E7%94%9F%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>《毛泽东思想和中国特色社会主义理论体系概论》求生指南</title>
    <link href="https://picpo.top/2022/11/06/%E3%80%8A%E6%AF%9B%E6%B3%BD%E4%B8%9C%E6%80%9D%E6%83%B3%E5%92%8C%E4%B8%AD%E5%9B%BD%E7%89%B9%E8%89%B2%E7%A4%BE%E4%BC%9A%E4%B8%BB%E4%B9%89%E7%90%86%E8%AE%BA%E4%BD%93%E7%B3%BB%E6%A6%82%E8%AE%BA%E3%80%8B/"/>
    <id>https://picpo.top/2022/11/06/%E3%80%8A%E6%AF%9B%E6%B3%BD%E4%B8%9C%E6%80%9D%E6%83%B3%E5%92%8C%E4%B8%AD%E5%9B%BD%E7%89%B9%E8%89%B2%E7%A4%BE%E4%BC%9A%E4%B8%BB%E4%B9%89%E7%90%86%E8%AE%BA%E4%BD%93%E7%B3%BB%E6%A6%82%E8%AE%BA%E3%80%8B/</id>
    <published>2022-11-06T12:13:34.000Z</published>
    <updated>2022-12-28T12:04:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/%E5%9B%BE%E7%89%87-300x181.png"></p><h2 id="考题分布"><a href="#考题分布" class="headerlink" title="考题分布"></a>考题分布</h2><p>单选题10*1分&#x3D;10分</p><p>名词解释4*5分&#x3D;20分</p><p>简答题：4*10&#x3D;40分</p><p>材料分析题：2*15&#x3D;30分</p><h2 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a><strong>名词解释</strong></h2><ol><li>实事求是：实事求是，就是一切从实际出发，理论联系实际，坚持实践中检验真理和发展真理。毛泽东指出：实事就是客观存在的一切事务，是就是客观事物的内部联系，即规律，求就是要求去研究</li><li>群众路线：一切为了群众，一切依靠群众，从群众中来，到群众中去，把党的正确主张变成群众自觉的行动</li><li>独立自主：坚持独立思考走自己的路，坚定不移地<strong>维护民族独立</strong>、<strong>捍卫国家主权</strong>，把立足点放在依靠自己的力量基础上，同时积极争取外援，开展国际文化经济交流，学习一切国外<strong>对我们有益的先进</strong>事物</li><li>新民主主义革命的总路线：无产阶级领导的，人民大众的，反对<strong>帝国主义，封建主义，官僚资本主义的革命</strong>（三座大山）</li><li>党在过渡时期的总路线：从新中国成立—-&gt;社会主义改造基本完成，这是过渡时期。是在相当长的一段时间内逐步实现国家社会主义工业化，并逐渐对农业手工业<strong>资本主义</strong>工商业社会主义改造</li><li>毛泽东思想：是马克思主义中国化<strong>第一个重大理论成果</strong>，是马克思列宁主义<strong>在中国的运用和发展</strong>，是被实践证明的了中国革命与建设的正确理论原则和经验总结，是中国共产党集体智慧结晶，是党必须长期坚持的指导思想</li><li>三步走战略：1987年4月，邓小平提出，10月确定<br>1981—&gt;1990，国民生产总值比1980翻一番，解决温饱问题<br>1991—&gt;20世纪末，再翻一倍，达到小康水平<br>到21世纪中叶，<strong>人均</strong>国民生产总值达到中等发达国家水平，人民生活富裕，基本实现现代化，继续前进</li><li>社会主义初级阶段理论：初级阶段指我国生产力落后、商品经济不发达的条件下建设社会主义必然要经历的阶段，就是从社会主义—&gt;社会主义现代化基本完成的阶段</li><li>一国两制：在祖国统一的前提下，国家主体实行社会主义制度，港澳台保持原有社会制度和生活方式长期不变</li><li>依法治国：广大人民群众在党的领导下，依照宪法和法律法规，通过各种途径和形式管理<strong>国家事务</strong>，管理<strong>经济文化事业</strong>，管理<strong>社会事务</strong>，保证国家各项工作都依法进行，逐步实现社会主义民主的<strong>制度化和法律化</strong>，使这种<strong>制度和法律</strong>不因<strong>领导人的改变</strong>而改变，不因<strong>领导人看法和注意力改变</strong>而改</li></ol><h2 id="简答题"><a href="#简答题" class="headerlink" title="简答题"></a>简答题</h2><h3 id="毛泽东思想形成和发展的社会历史条件"><a href="#毛泽东思想形成和发展的社会历史条件" class="headerlink" title="毛泽东思想形成和发展的社会历史条件"></a>毛泽东思想形成和发展的社会历史条件</h3><ol><li>19世纪末20世纪初，世界进入帝国主义和无产阶级革命时代</li><li>十月革命的胜利开启世界无产阶级革命的新时代。他将中国反帝反封建的民主革命，从<strong>旧的世界资产阶级民主革命</strong>的一部分，转变为<strong>新的世界无产阶级社会主义革命</strong>的一部分</li><li>十月革命送来了马克思列宁主义，中国革命有了科学的指导思想</li><li>中国革命胜利后，经历了二次大战后两大阵营的对立斗争，西方国家不仅封锁禁运而且力求和平演变，毛泽东思想便是从这样的社会历史背景下形成发展的</li><li>中国共产党领导人民进行<strong>革命和建设的成功实践</strong>是毛泽东思想形成发展的<strong>实践基础</strong></li></ol><h3 id="毛泽东思想活的灵魂和历史地位"><a href="#毛泽东思想活的灵魂和历史地位" class="headerlink" title="毛泽东思想活的灵魂和历史地位"></a>毛泽东思想活的灵魂和历史地位</h3><p>活的灵魂：实事求是，群众路线，独立自主</p><p>历史地位：</p><ol><li>马克思主义中国化的第一个重大理论成果</li><li>是中国革命和建设的科学指南</li><li>是中国共产党和人民的宝贵精神财富</li></ol><h3 id="土地革命、武装斗争、农村革命根据地建设-三者之间的联系"><a href="#土地革命、武装斗争、农村革命根据地建设-三者之间的联系" class="headerlink" title="土地革命、武装斗争、农村革命根据地建设 三者之间的联系"></a>土地革命、武装斗争、农村革命根据地建设 三者之间的联系</h3><ol><li>土地革命是民主革命的主要内容</li><li>武装斗争是中国革命的主要形式，是农村革命根据地建设和土地革命的强有力保证</li><li>农村革命根据地是中国革命的战略阵地，是进行武装斗争和开展土地革命的依托</li><li>党的领导下，实现了<strong>三者的密切结合和有机统一</strong></li></ol><h3 id="新民主主义革命基本纲领"><a href="#新民主主义革命基本纲领" class="headerlink" title="新民主主义革命基本纲领"></a>新民主主义革命基本纲领</h3><ol><li>政治：推翻帝国主义和封建主义统治，建立一个以无产阶级领导、工农联盟为基础的、各个革命阶级联合专政的新民主主义的共和国</li><li>经济：没收封建地主的土地归农民，没收官僚资产阶级的垄断资本归新民主主义的国家所有，保护民族工商业</li><li>文化：无产阶级领导的人民大众的<strong>反帝反封建文化</strong>，民族的科学的大众的文化</li></ol><h3 id="新民主主义革命的三大法宝和相互关系"><a href="#新民主主义革命的三大法宝和相互关系" class="headerlink" title="新民主主义革命的三大法宝和相互关系"></a>新民主主义革命的三大法宝和相互关系</h3><p>三大法宝：统一战线，武装斗争，党的建设</p><p>相互关系：统一战线和武装斗争中国革命的两个基本特点，是战胜敌人的基本武器。统一战线是实行武装斗争的统一战线，武装斗争是统一战线的中心支柱，党的组织则是掌握这两个武器的英勇战士</p><h3 id="社会主义改造的经验"><a href="#社会主义改造的经验" class="headerlink" title="社会主义改造的经验"></a>社会主义改造的经验</h3><ol><li>社会主义工业建设和社会主义改造同时进行</li><li>积极引导，逐步过渡</li><li>和平方法改造</li></ol><h3 id="社会主义-基本-制度确立的重大意义"><a href="#社会主义-基本-制度确立的重大意义" class="headerlink" title="社会主义**基本**制度确立的重大意义"></a>社会主义**<em>基本</em>**制度确立的重大意义</h3><p>是中国历史上最深刻最伟大的社会变革，为当今中国奠定了制度基础，也为中特社的建立创新提供了重要前提</p><ol><li>极大地提高了<strong>工人阶级和广大劳动人民</strong>的积极性和创造性，极大促进了生产力发展</li><li>使广大人民真正成为国家主人</li><li>使占全球人口四分之一的东方大国进入了社会主义社会，进一步改变了世界政治经济格局，增强了社会主义力量，对世界和平的维护产生了重要影响</li><li>是马克思列宁主义<strong>关于社会主义革命理论</strong>在中国的正确应用和创造性发展的结果，不仅再次证明了马克思列宁主义的真理性，而且以其独特的理论原则和经验总结<strong>丰富和发展了科学社会主义</strong></li></ol><h3 id="党对社会主义建设道路初步探索的重大意义"><a href="#党对社会主义建设道路初步探索的重大意义" class="headerlink" title="党对社会主义建设道路初步探索的重大意义"></a>党对社会主义建设道路初步探索的重大意义</h3><ol><li>巩固和发展了我国的社会主义</li><li>为开创中特社提供了宝贵经验、理论准备、物质基础</li><li>丰富了科学社会主义的理论和实践</li></ol><h3 id="初步探索的经验教训"><a href="#初步探索的经验教训" class="headerlink" title="初步探索的经验教训"></a>初步探索的经验教训</h3><ol><li>必须把马克思主义和中国实际相结合，探索符合中国的道路</li><li>必须正确认识社会主义的主要和次要矛盾，集中力量发展生产力</li><li>必须从实际出发，建设速度和规模要与国力相适应，不能急于求成</li><li>必须发展社会主义民主，健全社会主义法制</li><li>坚持党的民主集中制和集体领导制度，加强执政党建设</li><li>必须坚持对外开放，借鉴和吸收人类文明成果建设社会主义，不能关起门来搞建设</li></ol><h3 id="邓小平理论形成的历史社会条件"><a href="#邓小平理论形成的历史社会条件" class="headerlink" title="邓小平理论形成的历史社会条件"></a>邓小平理论形成的历史社会条件</h3><ol><li>时代背景：和平与发展成为时代主题</li><li>历史根据：社会主义建设的经验教训</li><li>现实依据：改革开放和现代化建设</li></ol><h3 id="三步走"><a href="#三步走" class="headerlink" title="三步走"></a>三步走</h3><p>同上</p><h3 id="和平统一一国两制的基本内容"><a href="#和平统一一国两制的基本内容" class="headerlink" title="和平统一一国两制的基本内容"></a>和平统一一国两制的基本内容</h3><ol><li>坚持一个中国</li><li>两制并存</li><li>港澳台高度自治</li><li>尽最大努力争取和平统一，但不承诺放弃使用武力</li><li>解决台湾问题，实现祖国完全统一，寄希望于台湾人民</li></ol><h3 id="简述“改革是中国第二次革命”"><a href="#简述“改革是中国第二次革命”" class="headerlink" title="简述“改革是中国第二次革命”"></a>简述“改革是中国第二次革命”</h3><ol><li>改革是社会主义社会发展的直接动力。社会主义社会的基本矛盾仍然是生产力和生产关系、上层建筑和经济基础之间的矛盾，这些矛盾推动了社会主义社会的发展。在社会主义社会，改革从根本上改变束缚生产力发展的经济体制，促进生产力的发展，从而解决了发展动力的问题</li><li>改革是一次新的革命，不是也不允许否定和抛弃我们建立起来的社会主义基本制度，他是社会主义制度的自我完善和发展</li><li>改革不是一个阶级推翻另一个阶级的革命，也不是原因经济体制的细枝末节修补，而是对体制的根本性变革。他的实质和目标，是要从根本上改变束缚我国生产力发展的经济体制，建立一个充满生机和活力的社会主义新经济体制，同时相应地改革政治体制和其他方面的体制，以实现社会主义现代化</li></ol><h3 id="邓小平理论的历史地位"><a href="#邓小平理论的历史地位" class="headerlink" title="邓小平理论的历史地位"></a>邓小平理论的历史地位</h3><ol><li>马克思列宁主义、毛泽东思想的<strong>继承与发展</strong></li><li>中特社理论体系的<strong>开篇之作</strong></li><li><strong>改革开放和社会主义现代化建设的科学指南</strong></li></ol><h3 id="三个代表的社会历史条件"><a href="#三个代表的社会历史条件" class="headerlink" title="三个代表的社会历史条件"></a>三个代表的社会历史条件</h3><ol><li>时代背景：冷战后对国际局势的科学判断的基础上形成的。世界多极化和经济全球化的趋势在曲折中发展，和平与发展仍是时代的主题</li><li>是科学判断党的历史方位和总结历史经验的基础上提出来的</li><li>是在建设中特社伟大实践的基础上形成的。就是对过程中各种出现的实际问题中形成和发展的</li></ol><h3 id="三个代表"><a href="#三个代表" class="headerlink" title="三个代表"></a>三个代表</h3><ol><li>始终代表中国先进生产力的发展要求</li><li>始终代表中国先进文化的前进方向</li><li>始终代表中国最广大人民的根本利益</li></ol><h3 id="科学发展观的的社会历史条件"><a href="#科学发展观的的社会历史条件" class="headerlink" title="科学发展观的的社会历史条件"></a>科学发展观的的社会历史条件</h3><ol><li>是把深刻把握我国基本国情和新的阶段性特征的基础上形成和发展的</li><li>是总结改开特别是十六大以来实践经验的基础上形成和发展的</li><li>是深刻分析国际形势、顺应世界发展趋势、借鉴国外发展经验的基础上形成和发展的</li></ol><h3 id="科学发展观的科学内涵和精神实质"><a href="#科学发展观的科学内涵和精神实质" class="headerlink" title="科学发展观的科学内涵和精神实质"></a>科学发展观的科学内涵和精神实质</h3><p>内涵：</p><ol><li><strong>推动经济发展</strong>是第一要义</li><li><strong>以人为本</strong>是核心立场</li><li><strong>全面协调可持续</strong>是基本要求</li><li><strong>统筹兼顾</strong>是根本方法</li></ol><p>实质：</p><p>解放思想、实事求是、与时俱进、求真务实</p>]]></content>
    
    
    <summary type="html">考题分布
单选题10*1分=10分

名词解释4*5分=20分

简答题：4*10=40分

材料分析题：2*15=30分

名词解释
 1.  实事求是：实事求是，就是一切从实际出发，理论联系实际，坚持实践中检验真理和发展真理。毛泽东指出：实事就是客观存在的一切事务，是就是客观事物的内部联系，即规律，求就是要求去研究
 2.  群众路线：一切为了群众，一切依靠群众，从群众中来，到群众中去，把党的正确主张变成群众自觉的行动
 3.  独立自主：坚持独立思考走自己的路，坚定不移地维护民族独立、捍卫国家主权，把立足点放在依靠自己的力量基础上，同时积极争取外援，开展国际文化经济交流，学习一切国外对我</summary>
    
    
    
    <category term="我爱学习" scheme="https://picpo.top/categories/%E6%88%91%E7%88%B1%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="求生指南" scheme="https://picpo.top/tags/%E6%B1%82%E7%94%9F%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>stable-diffusion-webui的食用方法</title>
    <link href="https://picpo.top/2022/10/08/stable-diffusion-webui%E7%9A%84%E9%A3%9F%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <id>https://picpo.top/2022/10/08/stable-diffusion-webui%E7%9A%84%E9%A3%9F%E7%94%A8%E6%96%B9%E6%B3%95/</id>
    <published>2022-10-08T11:15:11.000Z</published>
    <updated>2024-09-16T18:34:44.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252157828.png"></p><h2 id="0x01-Anaconda安装"><a href="#0x01-Anaconda安装" class="headerlink" title="0x01 Anaconda安装"></a>0x01 Anaconda安装</h2><p>这个没啥好说的，主要是要记住你的安装路径</p><h2 id="0x02-安装CUDA"><a href="#0x02-安装CUDA" class="headerlink" title="0x02 安装CUDA"></a>0x02 安装CUDA</h2><p>到官网：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://developer.nvidia.com/cuda-downloads?target_os=Windows&amp;target_arch=x86_64&amp;target_version=10&amp;target_type=exe_local</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252158948.png"></p><h2 id="0x03-安装stable-diffusion-webui"><a href="#0x03-安装stable-diffusion-webui" class="headerlink" title="0x03 安装stable-diffusion-webui"></a>0x03 安装stable-diffusion-webui</h2><h3 id="1-sd-webui"><a href="#1-sd-webui" class="headerlink" title="1.sd-webui"></a>1.sd-webui</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/sd-webui/stable-diffusion-webui.git</span><br></pre></td></tr></table></figure><p>安装后按他所说的在根目录建立<strong>custom-conda-path.txt</strong>，并写上自己的Anaconda根目录</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252158626.png"></p><p>下载模型文件，放在<strong>\stable-diffusion-webui\models\ldm\stable-diffusion-v1</strong>下</p><p>其实也可以mklink，不过我没试过，因为我的novelaileak文件在下载盘里，下载盘是个远古机械，速度不是很快</p><h3 id="2-另一个更好的web-ui"><a href="#2-另一个更好的web-ui" class="headerlink" title="2.另一个更好的web-ui"></a>2.另一个更好的web-ui</h3><p>这个更好，可以过滤一些negative prompt</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone  https://github.com/AUTOMATIC1111/stable-diffusion-webui.git</span><br></pre></td></tr></table></figure><p>安装过程过于缓慢，建议先pip安装他的requirements.txt</p><h3 id="3-泄露模型"><a href="#3-泄露模型" class="headerlink" title="3.泄露模型"></a>3.泄露模型</h3><p>我这里用的是novelaileak的，你也可以用其他的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">magnet:?xt=urn:btih:5bde442da86265b670a3e5ea3163afad2c6f8ecc&amp;dn=novelaileak&amp;tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce&amp;tr=udp%3A%2F%2F9.rarbg.com%3A2810%2Fannounce&amp;tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A6969%2Fannounce&amp;tr=http%3A%2F%2Ftracker.openbittorrent.com%3A80%2Fannounce&amp;tr=udp%3A%2F%2Fopentracker.i2p.rocks%3A6969%2Fannounce</span><br></pre></td></tr></table></figure><p>第二版（125G）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">magnet:?xt=urn:btih:a20087e7807f28476dd7b0b2e0174981709d89cd&amp;dn=novelaileakpt2&amp;tr=udp%3a%2f%2ftracker.openbittorrent.com%3a6969%2fannounce&amp;tr=http%3a%2f%2ftracker.openbittorrent.com%3a80%2fannounce&amp;tr=https%3a%2f%2ftracker.nanoha.org%3a443%2fannounce</span><br></pre></td></tr></table></figure><p>今天流出的新版本，效果更好但是空间占用更大</p><h2 id="0x04-食用"><a href="#0x04-食用" class="headerlink" title="0x04 食用"></a>0x04 食用</h2><p>到根目录，运行一下webui的cmd，会自动安装环境</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252159861.png"></p><p>我的GTX1060 6G生成速度不是很快，我这有块Tesla p4，不知道加上去会不会加快点速度</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252159861.png"></p><p>更多关键词请见：</p><p><a href="https://wiki.installgentoo.com/wiki/Stable_Diffusion#Keywords">https://wiki.installgentoo.com/wiki/Stable_Diffusion#Keywords</a></p><p><a href="https://gelbooru.com/index.php?page=tags&s=list">https://gelbooru.com/index.php?page=tags&s=list</a></p>]]></content>
    
    
    <summary type="html">0x01 Anaconda安装
这个没啥好说的，主要是要记住你的安装路径

0x02 安装CUDA
到官网：

1


https://developer.nvidia.com/cuda-downloads?target_os=Windows&amp;target_arch=x86_64&amp;target_version=10&amp;target_type=exe_local




0x03 安装stable-diffusion-webui
1.sd-webui
1


git clone https://github.com/sd-webui/stable-diffusion-webui.git


安装后</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="AI" scheme="https://picpo.top/tags/AI/"/>
    
  </entry>
  
  <entry>
    <title>Github代理</title>
    <link href="https://picpo.top/2022/10/08/github%E4%BB%A3%E7%90%86/"/>
    <id>https://picpo.top/2022/10/08/github%E4%BB%A3%E7%90%86/</id>
    <published>2022-10-08T09:35:14.000Z</published>
    <updated>2024-09-16T18:35:05.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252133062.jpg"></p><p>clash别忘了开LAN</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global http.proxy protocol://127.0.0.1:7890</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">clash别忘了开LAN

1


git config --global http.proxy protocol://127.0.0.1:7890</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="git" scheme="https://picpo.top/tags/git/"/>
    
    <category term="github" scheme="https://picpo.top/tags/github/"/>
    
  </entry>
  
  <entry>
    <title>解决Vmware中Ubuntu22.04的vm-tools无法安装的问题</title>
    <link href="https://picpo.top/2022/09/09/%E8%A7%A3%E5%86%B3vmware%E4%B8%ADubuntu22-04%E7%9A%84vm-tools%E6%97%A0%E6%B3%95%E5%AE%89%E8%A3%85%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>https://picpo.top/2022/09/09/%E8%A7%A3%E5%86%B3vmware%E4%B8%ADubuntu22-04%E7%9A%84vm-tools%E6%97%A0%E6%B3%95%E5%AE%89%E8%A3%85%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2022-09-09T06:20:52.000Z</published>
    <updated>2024-09-16T18:33:30.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212242323435.jpg"></p><p>谷歌了一下，vm-tools无法安装初步判定是Vmware 的版本对Ubuntu22.04不兼容造成的，安装open-vm-tools可以解决：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install open-vm-tools</span><br><span class="line">apt install open-vm-tools-desktop</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">谷歌了一下，vm-tools无法安装初步判定是Vmware 的版本对Ubuntu22.04不兼容造成的，安装open-vm-tools可以解决：

1
2


apt install open-vm-tools
apt install open-vm-tools-desktop</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="ubuntu" scheme="https://picpo.top/tags/ubuntu/"/>
    
    <category term="Vmware" scheme="https://picpo.top/tags/Vmware/"/>
    
  </entry>
  
  <entry>
    <title>远程桌面（RDP）的思考</title>
    <link href="https://picpo.top/2022/09/01/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%EF%BC%88rdp%EF%BC%89%E7%9A%84%E6%80%9D%E8%80%83/"/>
    <id>https://picpo.top/2022/09/01/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%EF%BC%88rdp%EF%BC%89%E7%9A%84%E6%80%9D%E8%80%83/</id>
    <published>2022-09-01T15:56:35.000Z</published>
    <updated>2025-04-17T09:52:40.029Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212242340599.jpg"></p><h2 id="0x00说在前面"><a href="#0x00说在前面" class="headerlink" title="0x00说在前面"></a>0x00说在前面</h2><p>新学期，在社团活动室组了一台主机。打算开个远程桌面，这样我在宿舍的话，也可以访问我的主机了。</p><h2 id="0x01方案选择"><a href="#0x01方案选择" class="headerlink" title="0x01方案选择"></a>0x01方案选择</h2><p>无非就以下几个方案：</p><ol><li>第三方远程桌面软件&#x2F;穿透软件来突破内网限制。这个的话属实没有必要，因为我就在学校里有这个需求，否定。</li><li>IPv4+端口映射。想啥呢，暴露在校园网下，这是要给x1c的大哥们冲业绩吗？否定。</li><li>IPv4+proxifier代理。这个方案是我一开始最认可的，当我搭好socks5隧道时发现，我确实可以访问192.*.*.*下的内网设备，包括我的网页服务器，pt下载机，以及别人乱七八糟的服务端API数据库接口Nas啥的，结果轮到我的主机的rdp端口，他就不行了。初步猜测可能和Windows的防火墙策略有关，但是我在网上找了半天没找到和我一样情况的人，少部分人思路和我一样，但是他们似乎没出现这么神奇的现象，否定。</li><li>IPv6。这个方案是肯定可以的——我现在用的就是。学校里有自己的校园网和运营商网络，运营商网络是没法通过DHCP分配IPv6的，但是校园网是可以的。另外，社团的网也是可以的。</li></ol><p>IPv6的方案好就好在，我校的校园网虽然晚上会断网，但是校园网可以在未登录的情况下分配一个教育网段的地址。就算这个不行，也可以通过连接手机热点的方式，获取IPv6。注意，我校校园网不支持SLACC，安卓设备无法通过连接校园网WiFi来获取v6地址。</p><p>至于客户端，我在Windows端选择的是mstsc（就是专业版自带的那个）。安卓用的是谷歌商店的RD客户端（同样微软出品）。注意，这个软件微软商店也有，但是不推荐，因为延迟远不如原生的mstsc。</p><h2 id="0x02实测表现"><a href="#0x02实测表现" class="headerlink" title="0x02实测表现"></a>0x02实测表现</h2><p>总的来说还是非常不错的，44ms。其实这是最高延迟了，测到过26ms的。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212242340193.png"></p><h2 id="0x03优化"><a href="#0x03优化" class="headerlink" title="0x03优化"></a>0x03优化</h2><h3 id="1-突破30fps限制"><a href="#1-突破30fps限制" class="headerlink" title="1.突破30fps限制"></a>1.突破30fps限制</h3><p>打开Windows<code>注册表编辑器 (regedit.exe)</code>，找到以下子项：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations</span><br></pre></td></tr></table></figure><p>右击新建一个<code>DWORD(32-bit)值</code>的项，改名为<code>DWMFRAMEINTERVAL</code>，修改为十进制下的15。</p><p>为什么？因为这个时候的帧率限制为1000&#x2F;15，也就是66FPS。</p><p>结束后保存重启，可以远程桌面登录后，通过一些测试fps的网站来测试，你会发现fps不是之前30而是60或者更高了。</p><h3 id="2-显卡加速"><a href="#2-显卡加速" class="headerlink" title="2.显卡加速"></a>2.显卡加速</h3><p>打开远程主机上的组策略（Win+R打开运行，输入<code>gpedit.msc</code>）</p><p>依次找到计算机配置-&gt;管理模板-&gt;Windows组件-&gt;远程桌面服务-&gt;远程桌面会话主机-&gt;远程会话环境</p><p>在右边选择<strong>将硬件图形适配器应用于所有远程桌面服务会话</strong></p><p>同时也可以打开<strong>配置远程桌面连接的H.264&#x2F;AVC硬件编码</strong></p><p>其实这没啥太大用处，具体原因接着说。</p><h2 id="0x04游戏玩家的十字路口"><a href="#0x04游戏玩家的十字路口" class="headerlink" title="0x04游戏玩家的十字路口"></a>0x04游戏玩家的十字路口</h2><p>首先我们要明白：<strong>微软RDP是不支持独显的。有需要远程玩游戏的话，需要第三方的远程桌面、远程遥控软件才行。</strong></p><p>在我们连接到远程桌面时，打开任务管理器，会发现独显是可以正常显示的。但是这并不代表你可以打游戏或者开blender啥的。那么这是怎么回事呢？</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212242341801.png"></p><p>如果你在这时打开游戏，你会发现一些游戏确实可以打开。比如我打开文明6，帧率只有30+，cpu频率暴增到3.99GHz，占用暴增40%，显卡摆烂在3%一动不动，这和在本机打开后的表现天差地别。而像apex，那就根本打不开了。注意，这和有无集显没有关系，我是12400F，照样可以显示，说明是有个虚拟显卡的。</p><p>当然，NVidia也注意到了这一点，于是推出了nvidia-opengl-rdp——恕我直言，这个驱动几乎没什么作用……都什么年代了，还在用传统OpenGL。DirectX有人说是原生支持了，我觉得他在放屁，要是真的原生支持我怎么可能出现以上情况？</p><p>官网下载需要登陆注册developer账号，我找到个第三方的百度网盘下载，不大就0.3M大小。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">链接：https://pan.baidu.com/s/1HKy\_Q\_rZx1oy3kq4XO0AuA  </span><br><span class="line">提取码：pntw</span><br></pre></td></tr></table></figure><p>至于想玩游戏嘛……可以试试其他的软件，可能在延迟方面不如微软原生的mstsc，也有是游戏识别的限制。这些东西，等我以后试到了再做反馈吧。</p>]]></content>
    
    
    <summary type="html">0x00说在前面
新学期，在社团活动室组了一台主机。打算开个远程桌面，这样我在宿舍的话，也可以访问我的主机了。

0x01方案选择
无非就以下几个方案：

 1. 第三方远程桌面软件/穿透软件来突破内网限制。这个的话属实没有必要，因为我就在学校里有这个需求，否定。
 2. IPv4+端口映射。想啥呢，暴露在校园网下，这是要给x1c的大哥们冲业绩吗？否定。
 3. IPv4+proxifier代理。这个方案是我一开始最认可的，当我搭好socks5隧道时发现，我确实可以访问192.*.*.*下的内网设备，包括我的网页服务器，pt下载机，以及别人乱七八糟的服务端API数据库接口Nas啥的，结果轮到我</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="RDP" scheme="https://picpo.top/tags/RDP/"/>
    
  </entry>
  
  <entry>
    <title>记一次文件上传类型渗透</title>
    <link href="https://picpo.top/2022/05/07/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B1%BB%E5%9E%8B%E6%B8%97%E9%80%8F/"/>
    <id>https://picpo.top/2022/05/07/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B1%BB%E5%9E%8B%E6%B8%97%E9%80%8F/</id>
    <published>2022-05-07T08:50:41.000Z</published>
    <updated>2024-09-16T18:32:58.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252151241.jpg"></p><p>仅用于信息安全教学和演示，请勿用于其他用途</p><blockquote><p>“从未如此美妙的开局！”</p></blockquote><h2 id="0x00写在前面"><a href="#0x00写在前面" class="headerlink" title="0x00写在前面"></a>0x00写在前面</h2><p>很久没有做安全相关的事了，昨天在好奇心的驱使下，尝试挖了一个比较简单的洞，过程不复杂，但是对于以后的可能进行的后端开发敲响了警钟。</p><h2 id="0x01过程"><a href="#0x01过程" class="headerlink" title="0x01过程"></a><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252151117.png">0x01过程</h2><p>这个网站是一个某类表情包（一眼丁真）的分享网站，有随机表情包、按照id搜索表情包、按照id点赞表情包、上传表情包等功能。显然，有上传就一定有审核，有审核就一定有管理员端，而且这是肯定进不去的。（下图为按照id点赞表情包的api，没啥用其实）</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252152233.png"></p><p>还是看看他的主界面吧，有一个上传，看看源码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;upload-pic-box&quot;&gt;</span><br><span class="line">    &lt;a id=&quot;pic-path&quot;&gt;上传一张图片吧&lt;/a&gt;</span><br><span class="line">    &lt;form id=&quot;upload-form&quot;&gt;</span><br><span class="line">        &lt;input onchange=&quot;validateFileType()&quot; type=&quot;file&quot; accept=&quot;image/gif,image/jpeg,image/jpg,image/png,image/svg&quot; name=&quot;user-upload&quot; id=&quot;user-upload&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">//...此处省略114514行~</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    var fileName = document.getElementById(&quot;user-upload&quot;).value;</span><br><span class="line">    var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();</span><br><span class="line">    if (extFile == &quot;jpg&quot;  extFile == &quot;jpeg&quot;  extFile == &quot;png&quot;  extFile == &#x27;gif&#x27;) &#123;</span><br><span class="line">        showfilename();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        alert(&quot;你怎么骗我，\n哼，上传点正常格式的照片！（jpg/png/gif）&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>可以看出，如果服务端没做验证的话，这里的前端校验就是马奇诺防线，轻松上传我们的🐴</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252152111.png"></p><p>然后我们需要定位我们的🐴在哪里了，本来这有些棘手，毕竟万一人家后端有个杀🐴程序呢？（虽然能上传成功的话就说明大概率不会有了233）</p><p>然鹅，在审查其他api时，我发现了有个叫做&#x2F;admin-get.php的get请求。我试着直接curl了一下，结果大跌眼镜的是，这玩意谁都能访问，而且一堆较为敏感的信息，虽然没有标识，但是能一眼看出有些字段是图片id和<strong>图片地址</strong>的。这极为致命，因为这就告诉了我上传的🐴的位置。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252152329.png"></p><p>这就离谱了嗷xdm，让我们连一下蚁剑</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252152852.png"></p><p><img src="http://192.168.1.35/wp-content/uploads/2022/05/%E5%9B%BE%E7%89%87-7-1024x168.png"></p><p>xswl</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252152256.png"></p><p>不过还是要提issue的，这是道德底线</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252152256.png"></p><p>作者也在后面做了补救措施，看得出来还是个比较核善的人😋😋😋</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252153180.png"></p><h2 id="0x02后记"><a href="#0x02后记" class="headerlink" title="0x02后记"></a>0x02后记</h2><p>实际上，我一直是在做黑盒测试，我是在拿到shell后才注意到它原来本身就开源了（离谱，那我浪费时间干嘛）。</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212252153366.png"></p><p>可以看出来作者本人真的强，但是再强的人也难免有些地方不如成熟框架做的细致。想起我这种彩笔以前直接用几个组件拼接了一个后端，还自以为是地写了个恶心人的黑盒，就以为能抵御95%的入侵了，结果某个“阿喀琉斯之踵”被别人（plusls）拒绝服务攻击了，寄。</p>]]></content>
    
    
    <summary type="html">仅用于信息安全教学和演示，请勿用于其他用途

“从未如此美妙的开局！”

0x00写在前面
很久没有做安全相关的事了，昨天在好奇心的驱使下，尝试挖了一个比较简单的洞，过程不复杂，但是对于以后的可能进行的后端开发敲响了警钟。

0x01过程
这个网站是一个某类表情包（一眼丁真）的分享网站，有随机表情包、按照id搜索表情包、按照id点赞表情包、上传表情包等功能。显然，有上传就一定有审核，有审核就一定有管理员端，而且这是肯定进不去的。（下图为按照id点赞表情包的api，没啥用其实）



还是看看他的主界面吧，有一个上传，看看源码

1
2
3
4
5
6
7
8
9
10
11
12
13
14
</summary>
    
    
    
    <category term="安全" scheme="https://picpo.top/categories/%E5%AE%89%E5%85%A8/"/>
    
    
    <category term="PHP" scheme="https://picpo.top/tags/PHP/"/>
    
    <category term="文件上传" scheme="https://picpo.top/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
    
  </entry>
  
  <entry>
    <title>青年大学习（江苏）的HTTP请求分析</title>
    <link href="https://picpo.top/2022/04/05/%E9%9D%92%E5%B9%B4%E5%A4%A7%E5%AD%A6%E4%B9%A0%EF%BC%88%E6%B1%9F%E8%8B%8F%EF%BC%89%E7%9A%84http%E8%AF%B7%E6%B1%82%E5%88%86%E6%9E%90/"/>
    <id>https://picpo.top/2022/04/05/%E9%9D%92%E5%B9%B4%E5%A4%A7%E5%AD%A6%E4%B9%A0%EF%BC%88%E6%B1%9F%E8%8B%8F%EF%BC%89%E7%9A%84http%E8%AF%B7%E6%B1%82%E5%88%86%E6%9E%90/</id>
    <published>2022-04-05T06:20:35.000Z</published>
    <updated>2024-09-16T18:32:39.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212242318378.png"></p><h2 id="0x01抓包"><a href="#0x01抓包" class="headerlink" title="0x01抓包"></a>0x01抓包</h2><p>江苏省青年大学习的接口：<a href="https://service.jiangsugqt.org/youth/lesson">https://service.jiangsugqt.org/youth/lesson</a></p><p><strong>确认课程</strong>的接口：<a href="https://service.jiangsugqt.org/youth/lesson/confirm">https://service.jiangsugqt.org/youth/lesson/confirm</a></p><p>微信打开xweb调试界面，打开就行：<a href="http://debugxweb.qq.com/?inspector=true">http://debugxweb.qq.com/?inspector=true</a></p><h2 id="0x02获取cookie"><a href="#0x02获取cookie" class="headerlink" title="0x02获取cookie"></a>0x02获取cookie</h2><p>青年大学习是通过cookie中的laravel_session来获取用户信息的，现在微信早就不支持vconsole了（要是支持我还这么抓包干嘛？），需要手机usb连接电脑，用Google chrome（建议edge浏览器，Google的有些资源加载不出来，或者很慢）的chrome:&#x2F;&#x2F;inspect&#x2F;#devices里面进行调试</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212242319220.png"></p><h2 id="0x03发送请求"><a href="#0x03发送请求" class="headerlink" title="0x03发送请求"></a>0x03发送请求</h2><p>我们只要发送两个请求，一个是江苏省青年大学习的接口，还有一个是<strong>确认课程</strong>的接口。</p><p>江苏省青年大学习的接口是用于获取课程信息的，里面能解析到下一个接口所需的_token和lesson_id字段</p><p>然后就是发post请求啦</p><p><img src="https://raw.githubusercontent.com/picpo/blog-PicGo/master/202212242320313.png"></p>]]></content>
    
    
    <summary type="html">0x01抓包
江苏省青年大学习的接口：https://service.jiangsugqt.org/youth/lesson

确认课程的接口：https://service.jiangsugqt.org/youth/lesson/confirm

微信打开xweb调试界面，打开就行：http://debugxweb.qq.com/?inspector=true

0x02获取cookie
青年大学习是通过cookie中的laravel_session来获取用户信息的，现在微信早就不支持vconsole了（要是支持我还这么抓包干嘛？），需要手机usb连接电脑，用Google chrome（建议</summary>
    
    
    
    <category term="野生技术协会" scheme="https://picpo.top/categories/%E9%87%8E%E7%94%9F%E6%8A%80%E6%9C%AF%E5%8D%8F%E4%BC%9A/"/>
    
    
    <category term="HTTP" scheme="https://picpo.top/tags/HTTP/"/>
    
    <category term="青年大学习" scheme="https://picpo.top/tags/%E9%9D%92%E5%B9%B4%E5%A4%A7%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
</feed>
